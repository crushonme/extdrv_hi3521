#include <linux/kernel.h>
#include <linux/version.h>
#include <linux/module.h>
#include <linux/types.h>
#include <linux/errno.h>
#include <linux/fcntl.h>
#include <linux/mm.h>
#include <linux/miscdevice.h>
#include <linux/proc_fs.h>

#include <linux/fs.h>
#include <linux/slab.h>
#include <linux/init.h>
#include <asm/uaccess.h>
#include <asm/io.h>
#include <asm/system.h>
#include <linux/interrupt.h>
#include <linux/ioport.h>
#include <linux/string.h>
#include <linux/list.h>
#include <asm/delay.h>
#include <linux/timer.h>
#include <linux/delay.h>
#include <linux/proc_fs.h>
#include <linux/poll.h>
#include <asm/bitops.h>
#include <asm/uaccess.h>
#include <asm/irq.h>
#include <linux/moduleparam.h>
#include <linux/ioport.h>
#include <linux/interrupt.h>

#include "gpio_i2c.h"
#include "nvp1918.h"

#ifdef NVP1118B
#define VDEC_108M
#endif

#ifndef VDEC_108M
#define VDEC_144M
#endif
#define SET_ALL_CH          0xff

#define CON_CENTER_VAL_NTSC 0x76
#define CON_CENTER_VAL_PAL  0x6b

#define BRI_CENTER_VAL_NTSC 0xf8
#define BRI_CENTER_VAL_PAL  0x08

#define HUE_CENTER_VAL_NTSC 0x00
#define HUE_CENTER_VAL_PAL  0x00

#define SAT_CENTER_VAL_NTSC 0x80
#define SAT_CENTER_VAL_PAL  0x80

unsigned int vdec_contrast_tbl[2]    = {CON_CENTER_VAL_NTSC, CON_CENTER_VAL_PAL};
unsigned int vdec_hue_tbl[2]         = {HUE_CENTER_VAL_NTSC, HUE_CENTER_VAL_PAL};
unsigned int vdec_saturation_tbl[2]  = {SAT_CENTER_VAL_NTSC, SAT_CENTER_VAL_PAL};
unsigned int vdec_brightness_tbl[2]  = {BRI_CENTER_VAL_NTSC, BRI_CENTER_VAL_PAL};
unsigned char vdec_motion_sens_tbl[8]= {0xe0,0xc8,0xa0,0x98,0x78,0x68,0x50,0x48};
extern unsigned int vdec_cnt;
extern int chip_id[2];
extern void audio_init(unsigned char dec, unsigned char ch_num, unsigned char samplerate, unsigned char bits);


unsigned char NVP1918_FPGA_B0_NT_Buf[] = {
		//	0x00 0x01 0x02 0x03 0x04 0x05 0x06 0x07 0x08 0x09 0x0A 0x0B 0x0C 0x0D 0x0E 0x0F
	/*0*/   0x00,0x00,0xF0,0x00,0x00,0x00,0xAF,0x00,0xA0,0xA0,0xA0,0xA0,0xF8,0xF8,0xF8,0xF8,
	/*1*/   0x76,0x76,0x76,0x76,0x80,0x80,0x80,0x80,0x00,0x00,0x55,0x55,0x84,0x84,0x84,0x84,
	/*2*/   0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	/*3*/   0x12,0x12,0x12,0x12,0x2F,0x82,0x0B,0x41,0x0A,0x0A,0x0A,0x0A,0x80,0x80,0x80,0x80,
	/*4*/   0x01,0x01,0x01,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	/*5*/   0x00,0x00,0x00,0x00,0xF1,0x10,0x32,0x00,0x9c,0x9c,0x9c,0x9c,0x1E,0x1E,0x1E,0x1E,
	/*6*/   0x00,0x00,0x00,0x00,0x08,0x08,0x08,0x08,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	/*7*/   0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x88,0x88,0x11,0x11,0x00,0x00,0x00,0x00, 
	/*8*/   0x00,0x00,0x00,0x00,0x00,0x00,0xAF,0x00,0xA0,0xA0,0xA0,0xA0,0xF8,0xF8,0xF8,0xF8,
	/*9*/   0x76,0x76,0x76,0x76,0x80,0x80,0x80,0x80,0x00,0x00,0x55,0x55,0x84,0x84,0x84,0x84,
	/*A*/   0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	/*B*/   0x12,0x12,0x12,0x12,0x2F,0x82,0x0B,0x41,0x0A,0x0A,0x0A,0x0A,0x80,0x80,0x80,0x80,
	/*C*/   0x01,0x01,0x01,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	/*D*/   0x00,0x00,0x00,0x00,0xF1,0x54,0x76,0x00,0x9c,0x9c,0x9c,0x9c,0x1E,0x1E,0x1E,0x1E,
	/*E*/   0x00,0x00,0x00,0x00,0x08,0x08,0x08,0x08,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	/*F*/   0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x88,0x88,0x11,0x11,0x00,0x00,0x00,0x00
	};

unsigned char NVP1918_FPGA_B1_NT_Buf[] = {
		//	0x00 0x01 0x02 0x03 0x04 0x05 0x06 0x07 0x08 0x09 0x0A 0x0B 0x0C 0x0D 0x0E 0x0F
	/*0*/   0x02,0x88,0x88,0x88,0x88,0x88,0x1A,0x80,0x03,0x00,0x10,0x32,0x54,0x76,0x98,0xBA,
	/*1*/   0xDC,0xFE,0xE4,0x80,0x00,0x00,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,
	/*2*/   0x88,0x88,0x80,0x10,0x18,0x16,0x00,0x00,0x00,0x88,0xFF,0xC0,0xAA,0xAA,0xAA,0xAA,
	/*3*/   0xAA,0x72,0x00,0x72,0x00,0x00,0x00,0x00,0x00,0x00,0xA1,0x10,0x10,0x00,0x08,0x00,
	/*4*/   0x00,0x00,0x00,0x00,0x14,0x01,0x10,0x40,0x60,0x00,0x03,0x10,0x00,0x00,0x00,0x00,
	/*5*/   0x37,0x37,0x1B,0x05,0x00,0x07,0x00,0x09,0x00,0x00,0x08,0x06,0x00,0x46,0x00,0x00,
	/*6*/   0xAA,0x1C,0x18,0xFF,0xAA,0x3C,0xFF,0xFF,0xAA,0x1B,0x00,0x00,0xAA,0x3B,0x00,0x00,
	/*7*/   0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x01,
	/*8*/   0x00,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x10,0x32,0x54,0x76,
	/*9*/   0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	/*A*/   0x40,0x00,0x47,0x35,0x8D,0x85,0x7e,0x73,0x7C,0x80,0x80,0x80,0x00,0x00,0x00,0x00,
	/*B*/   0x00,0x00,0x00,0x00,0x40,0x30,0x40,0x30,0x40,0x30,0x40,0x30,0x00,0x00,0x00,0x00,
	/*C*/   0x54,0x76,0x10,0x32,0x54,0x76,0x10,0x32,0x88,0x88,0x0F,0x00,0x70,0x70,0x70,0x70,
	/*D*/   0x00,0x00,0x00,0x00,0x00,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	/*E*/   0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x90,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	/*F*/   0x00,0x00,0x00,0x00,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
	};

unsigned char NVP1918_FPGA_B2_NT_Buf[] = {
		//	0x00 0x01 0x02 0x03 0x04 0x05 0x06 0x07 0x08 0x09 0x0A 0x0B 0x0C 0x0D 0x0E 0x0F
	/*0*/   0x03,0x60,0x03,0x60,0x03,0x60,0x03,0x60,0x03,0x60,0x03,0x60,0x03,0x60,0x03,0x60,
	/*1*/   0x00,0x00,0x12,0x00,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	/*2*/   0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
	/*3*/   0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
	/*4*/   0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
	/*5*/   0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
	/*6*/   0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
	/*7*/   0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
	/*8*/   0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
	/*9*/   0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
	/*A*/   0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
	/*B*/   0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
	/*C*/   0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
	/*D*/   0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
	/*E*/   0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	/*F*/   0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
	};

unsigned char NVP1918_FPGA_B3_NT_Buf[] = {
		//	0x00 0x01 0x02 0x03 0x04 0x05 0x06 0x07 0x08 0x09 0x0A 0x0B 0x0C 0x0D 0x0E 0x0F
	/*0*/   0xE0,0x09,0x0C,0x9F,0x00,0x20,0x40,0x80,0x50,0x38,0x0F,0x00,0x04,0x10,0x30,0x00,
	/*1*/   0x06,0x06,0x00,0x80,0x37,0x80,0x49,0x37,0xEF,0xDF,0xDF,0x20,0x0A,0x0C,0x00,0x88,
	/*2*/   0x80,0x00,0x23,0x00,0x2A,0xDC,0xF0,0x57,0x90,0x1F,0x52,0x78,0x00,0x68,0x00,0x07,
	/*3*/   0xE0,0x43,0xA2,0x00,0x00,0x15,0x25,0x00,0x00,0x02,0x02,0x00,0x00,0x00,0x00,0x00,
	/*4*/   0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x04,0x00,0x44,0x00,0x00,0x20,0x10,0x00,0x00,
	/*5*/   0x00,0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	/*6*/   0x53,0x00,0x01,0x00,0x99,0x99,0x99,0x99,0x55,0x55,0x00,0x00,0x00,0x00,0x00,0x00,
	/*7*/   0xB8,0x01,0x06,0x06,0x11,0x01,0xE0,0x13,0x03,0x22,0x00,0x00,0x00,0x00,0x00,0x00,
	/*8*/   0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	/*9*/   0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	/*A*/   0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	/*B*/   0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	/*C*/   0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	/*D*/   0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	/*E*/   0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	/*F*/   0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
	};

unsigned char NVP1918_FPGA_B0_PAL_Buf[] = {
		//	0x00 0x01 0x02 0x03 0x04 0x05 0x06 0x07 0x08 0x09 0x0A 0x0B 0x0C 0x0D 0x0E 0x0F
	/*0*/   0x00,0x00,0xF0,0x00,0x00,0x00,0xAF,0x00,0xDD,0xDD,0xDD,0xDD,0x08,0x08,0x08,0x08,
	/*1*/   0x6b,0x6b,0x6b,0x6b,0x80,0x80,0x80,0x80,0x00,0x00,0x55,0x55,0x84,0x84,0x84,0x84,
	/*2*/   0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	/*3*/   0x11,0x11,0x11,0x11,0x2F,0x02,0x0B,0x41,0x0A,0x0A,0x0A,0x0A,0x80,0x80,0x80,0x80,
	/*4*/   0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x04,0x04,0x04,0x04,
	/*5*/   0x04,0x04,0x04,0x04,0x01,0x10,0x32,0x00,0xB8,0xB8,0xB8,0xB8,0x1E,0x1E,0x1E,0x1E,
	/*6*/   0x00,0x00,0x00,0x00,0x0D,0x0D,0x0D,0x0D,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	/*7*/   0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x88,0x88,0x11,0x11,0x00,0x00,0x00,0x00, 
	/*8*/   0x00,0x00,0x00,0x00,0x00,0x00,0xAF,0x00,0xDD,0xDD,0xDD,0xDD,0x08,0x08,0x08,0x08,
	/*9*/   0x6b,0x6b,0x6b,0x6b,0x80,0x80,0x80,0x80,0x00,0x00,0x55,0x55,0x84,0x84,0x84,0x84,
	/*A*/   0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	/*B*/   0x11,0x11,0x11,0x11,0x2F,0x02,0x0B,0x41,0x0A,0x0A,0x0A,0x0A,0x80,0x80,0x80,0x80,
	/*C*/   0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x04,0x04,0x04,0x04,
	/*D*/   0x04,0x04,0x04,0x04,0x01,0x54,0x76,0x00,0xB8,0xB8,0xB8,0xB8,0x1E,0x1E,0x1E,0x1E,
	/*E*/   0x00,0x00,0x00,0x00,0x0D,0x0D,0x0D,0x0D,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	/*F*/   0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x88,0x88,0x11,0x11,0x00,0x00,0x00,0x00	
	};


unsigned char NVP1918_FPGA_B1_PAL_Buf[] = {
		//	0x00 0x01 0x02 0x03 0x04 0x05 0x06 0x07 0x08 0x09 0x0A 0x0B 0x0C 0x0D 0x0E 0x0F
	/*0*/   0x02,0x88,0x88,0x88,0x88,0x88,0x1A,0x80,0x03,0x00,0x10,0x32,0x54,0x76,0x98,0xBA,
	/*1*/   0xDC,0xFE,0xE4,0x80,0x00,0x00,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,
	/*2*/   0x88,0x88,0x80,0x10,0x18,0x16,0x00,0x00,0x00,0x88,0xFF,0xC0,0xAA,0xAA,0xAA,0xAA,
	/*3*/   0xAA,0x72,0x00,0x72,0x00,0x00,0x00,0x00,0x00,0x00,0xA1,0x10,0x10,0x00,0x08,0x00,
	/*4*/   0x00,0x00,0x00,0x00,0x14,0x01,0x10,0x40,0x60,0x00,0x03,0x10,0x00,0x00,0x00,0x00,
	/*5*/   0x37,0x37,0x1B,0x05,0x00,0x07,0x00,0x09,0x00,0x00,0x08,0x06,0x00,0x46,0x00,0x00,
	/*6*/   0xAA,0x1C,0x18,0xFF,0xAA,0x3C,0xFF,0xFF,0xAA,0x1B,0x00,0x00,0xAA,0x3B,0x00,0x00,
	/*7*/   0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x01,
	/*8*/   0x00,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x10,0x32,0x54,0x76,
	/*9*/   0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	/*A*/   0x4D,0x00,0x47,0x35,0x83,0x8a,0x8a,0x71,0x84,0x80,0x80,0x80,0x00,0x00,0x00,0x00,
	/*B*/   0x00,0x00,0x00,0x00,0x40,0x30,0x40,0x30,0x40,0x30,0x40,0x30,0x00,0x00,0x00,0x00,
	/*C*/   0x54,0x76,0x10,0x32,0x54,0x76,0x10,0x32,0x88,0x88,0x0F,0x00,0x70,0x70,0x70,0x70,
	/*D*/   0x00,0x00,0x00,0x00,0x00,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	/*E*/   0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x90,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	/*F*/   0x00,0x00,0x00,0x00,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
	};

unsigned char NVP1918_FPGA_B2_PAL_Buf[] = {
		//	0x00 0x01 0x02 0x03 0x04 0x05 0x06 0x07 0x08 0x09 0x0A 0x0B 0x0C 0x0D 0x0E 0x0F
	/*0*/   0x03,0x60,0x03,0x60,0x03,0x60,0x03,0x60,0x03,0x60,0x03,0x60,0x03,0x60,0x03,0x60,
	/*1*/   0x00,0x00,0xFF,0x00,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	/*2*/   0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
	/*3*/   0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
	/*4*/   0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
	/*5*/   0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
	/*6*/   0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
	/*7*/   0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
	/*8*/   0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
	/*9*/   0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
	/*A*/   0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
	/*B*/   0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
	/*C*/   0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
	/*D*/   0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
	/*E*/   0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x90,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	/*F*/   0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
	};

unsigned char NVP1918_FPGA_B3_PAL_Buf[] = {
		//	0x00 0x01 0x02 0x03 0x04 0x05 0x06 0x07 0x08 0x09 0x0A 0x0B 0x0C 0x0D 0x0E 0x0F
	/*0*/   0xE0,0x09,0x0C,0x9F,0x00,0x20,0x40,0x80,0x50,0x38,0x0F,0x00,0x04,0x10,0x30,0x04,
	/*1*/   0x06,0x06,0x00,0x80,0x37,0x80,0x49,0x37,0xEF,0xDF,0xDF,0x20,0x0A,0x0C,0x00,0x88,
	/*2*/   0x80,0x00,0x23,0x00,0x2A,0xCC,0xF0,0x57,0x90,0x1F,0x52,0x78,0x00,0x68,0x00,0x07,
	/*3*/   0xE0,0x43,0xA2,0x00,0x00,0x17,0x25,0x00,0x00,0x02,0x02,0x00,0x00,0x00,0x00,0x00,
	/*4*/   0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x04,0x00,0x44,0x00,0x00,0x20,0x10,0x00,0x00,
	/*5*/   0x00,0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	/*6*/   0x53,0x00,0x01,0x00,0x99,0x99,0x99,0x99,0x55,0x55,0x00,0x00,0x00,0x00,0x00,0x00,
	/*7*/   0xB8,0x01,0x06,0x06,0x11,0x01,0xE0,0x13,0x03,0x22,0x00,0x00,0x00,0x00,0x00,0x00,
	/*8*/   0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	/*9*/   0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	/*A*/   0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	/*B*/   0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	/*C*/   0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	/*D*/   0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	/*E*/   0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	/*F*/   0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
	};

void vdec_ntsc_common_init(void);
void vdec_pal_common_init(void);
void nvp1918_720h_nt(void);
void nvp1918_720h_pal(void);
void nvp1918_960h_nt(void);
void nvp1918_960h_pal(void);
void vdec_write_table(unsigned char chip_addr, unsigned char addr, unsigned char *tbl_ptr, unsigned char tbl_cnt);

extern unsigned int vdec_mode;
extern unsigned int vdec_slave_addr[2];
void afe_reset(void)
{
	gpio_i2c_write(vdec_slave_addr[0], 0xFF, 0x03);
	gpio_i2c_write(vdec_slave_addr[1], 0xFF, 0x03);
	gpio_i2c_write(vdec_slave_addr[0], 0x01, gpio_i2c_read(vdec_slave_addr[0], 0x01)|0xF0);
	gpio_i2c_write(vdec_slave_addr[1], 0x01, gpio_i2c_read(vdec_slave_addr[1], 0x01)|0xF0);
	gpio_i2c_write(vdec_slave_addr[0], 0x01, gpio_i2c_read(vdec_slave_addr[0], 0x01)&0x0F);
	gpio_i2c_write(vdec_slave_addr[1], 0x01, gpio_i2c_read(vdec_slave_addr[1], 0x01)&0x0F);
	printk("AFE reset done\n");
}
EXPORT_SYMBOL(afe_reset);

void set_4ch_videosequence(void)
{
	gpio_i2c_write(vdec_slave_addr[0], 0xFF, 0x01);
	gpio_i2c_write(vdec_slave_addr[0], 0xC0, 0x10);  //change video sequence here.
	gpio_i2c_write(vdec_slave_addr[0], 0xC1, 0x32);
	gpio_i2c_write(vdec_slave_addr[0], 0xCA, 0x01);  //only enable video port1
}

void vdec_system_init(void)
{
    int i = 0;

	for(i=0;i<vdec_cnt;i++)
	{
		gpio_i2c_write(vdec_slave_addr[i], 0xFF, 0x01);
#ifdef VDEC_108M
		//FIXME
		printk("NVP1918 Clock 108M Mode\n");
        gpio_i2c_write(vdec_slave_addr[i], 0x4A, 0x22);
        gpio_i2c_write(vdec_slave_addr[i], 0x4B, 0x20);
        gpio_i2c_write(vdec_slave_addr[i], 0x48, 0x60);
        gpio_i2c_write(vdec_slave_addr[i], 0x48, 0x61);
        gpio_i2c_write(vdec_slave_addr[i], 0x48, 0x60);
        gpio_i2c_write(vdec_slave_addr[i], 0x5e, 0x80);
        gpio_i2c_write(vdec_slave_addr[i], 0x38, 0x10);
        gpio_i2c_write(vdec_slave_addr[i], 0x38, 0x00);
#else
		printk("NVP1918 Clock 144M Mode\n");        
		gpio_i2c_write(vdec_slave_addr[i], 0x4A, 0x03);
       gpio_i2c_write(vdec_slave_addr[i], 0x4B, 0x10);
        gpio_i2c_write(vdec_slave_addr[i], 0x48, 0x60);
        gpio_i2c_write(vdec_slave_addr[i], 0x48, 0x61);
        gpio_i2c_write(vdec_slave_addr[i], 0x48, 0x60);        
        gpio_i2c_write(vdec_slave_addr[i], 0x5e, 0x00);
        gpio_i2c_write(vdec_slave_addr[i], 0x38, 0x10);
        gpio_i2c_write(vdec_slave_addr[i], 0x38, 0x00);      
		msleep(100);		
#endif

#if 1
		printk("~~~~~~~~~~~~~~~~S/W reset~~~~~~~~~~~~~~~~\n");
		gpio_i2c_write(vdec_slave_addr[i], 0xFF, 0x01);
		gpio_i2c_write(vdec_slave_addr[i], 0x48, 0x40);
		msleep(10);
		gpio_i2c_write(vdec_slave_addr[i], 0x48, 0x60);
#endif
	 }
}          

void vdec_ntsc_common_init(void)
{
	int i = 0;

	for(i=0;i<vdec_cnt;i++)
	{
		gpio_i2c_write(vdec_slave_addr[i], 0xFF, 0x00);
        vdec_write_table(vdec_slave_addr[i],0x00,NVP1918_FPGA_B0_NT_Buf,254);
		gpio_i2c_write(vdec_slave_addr[i], 0xFF, 0x01);
        vdec_write_table(vdec_slave_addr[i],0x00,NVP1918_FPGA_B1_NT_Buf,254);
		gpio_i2c_write(vdec_slave_addr[i], 0xFF, 0x02);
        vdec_write_table(vdec_slave_addr[i],0x00,NVP1918_FPGA_B2_NT_Buf,254);
		gpio_i2c_write(vdec_slave_addr[i], 0xFF, 0x03);
        vdec_write_table(vdec_slave_addr[i],0x00,NVP1918_FPGA_B3_NT_Buf,254);
	}
}

void vdec_pal_common_init(void)
{
	int i = 0;

	for(i=0;i<vdec_cnt;i++)
	{
		gpio_i2c_write(vdec_slave_addr[i], 0xFF, 0x00);
        vdec_write_table(vdec_slave_addr[i],0x00,NVP1918_FPGA_B0_PAL_Buf,254);
		gpio_i2c_write(vdec_slave_addr[i], 0xFF, 0x01);
        vdec_write_table(vdec_slave_addr[i],0x00,NVP1918_FPGA_B1_PAL_Buf,254);
		gpio_i2c_write(vdec_slave_addr[i], 0xFF, 0x02);
        vdec_write_table(vdec_slave_addr[i],0x00,NVP1918_FPGA_B2_PAL_Buf,254);
		gpio_i2c_write(vdec_slave_addr[i], 0xFF, 0x03);
        vdec_write_table(vdec_slave_addr[i],0x00,NVP1918_FPGA_B3_PAL_Buf,254);
	}
}

void reversion2_fix(void)
{
	int i = 0, j=0;
	for(i=0;i<vdec_cnt;i++)
	{
		if(chip_id[i] == NVP1914_R2 || chip_id[i] == NVP1114B_R2)
		{
			#ifdef VDEC_108M  //for nvp1114b r2 version
			//bank0
			gpio_i2c_write(vdec_slave_addr[i], 0xFF, 0x00);
			for(j=0;j<4;j++)
			{
				gpio_i2c_write(vdec_slave_addr[i], (0x30+j), 0x0c);  		//Y_delay setting
				if(vdec_mode == VDEC_PAL)
					gpio_i2c_write(vdec_slave_addr[i], (0x58+j), 0x3f);   	//h_delay setting
				else
					gpio_i2c_write(vdec_slave_addr[i], (0x58+j), 0x2f);     //h_delay VALUE NEEDS TO BE ODD!!! 12-14
			}
			//bank1
			gpio_i2c_write(vdec_slave_addr[i], 0xFF, 0x01);  //re-set the video sequence...
			gpio_i2c_write(vdec_slave_addr[i], 0xC0, 0x10);
			gpio_i2c_write(vdec_slave_addr[i], 0xC1, 0x32);
			gpio_i2c_write(vdec_slave_addr[i], 0xC4, 0x10);
			gpio_i2c_write(vdec_slave_addr[i], 0xC5, 0x32);
			//bank3
			gpio_i2c_write(vdec_slave_addr[i], 0xFF, 0x03);
			
			for(j=0;j<4;j++)
			{
				gpio_i2c_write(vdec_slave_addr[i], (0x54+j), 0x00);
			}
			
			gpio_i2c_write(vdec_slave_addr[i], 0x61, 0x00);
			gpio_i2c_write(vdec_slave_addr[i], 0x62, 0x00);
			gpio_i2c_write(vdec_slave_addr[i], 0x64, 0x00);
			gpio_i2c_write(vdec_slave_addr[i], 0x65, 0x00);
			for(j=0;j<4;j++)
				gpio_i2c_write(vdec_slave_addr[i], (0x81+j*2), 0x08);

			#else  //144MHZ
			//bank0
			gpio_i2c_write(vdec_slave_addr[i], 0xFF, 0x00);
			for(j=0;j<4;j++)
			{
				if(vdec_mode == VDEC_PAL_960)
					gpio_i2c_write(vdec_slave_addr[i], (0x30+j), 0x13);  //Y_delay setting
				else if(vdec_mode == VDEC_NTSC_960)
					gpio_i2c_write(vdec_slave_addr[i], (0x30+j), 0x14);
				else if(vdec_mode == VDEC_PAL)
					gpio_i2c_write(vdec_slave_addr[i], (0x30+j), 0x11);
				else
					gpio_i2c_write(vdec_slave_addr[i], (0x30+j), 0x12);

				if(vdec_mode == VDEC_PAL_960)
					gpio_i2c_write(vdec_slave_addr[i], (0x58+j), 0x07);  //h_delay VALUE NEEDS TO BE ODD!!! 12-14
				else if(vdec_mode == VDEC_NTSC_960)
					gpio_i2c_write(vdec_slave_addr[i], (0x58+j), 0xe7);
				else if(vdec_mode == VDEC_PAL)
					gpio_i2c_write(vdec_slave_addr[i], (0x58+j), 0x7f);
				else
					gpio_i2c_write(vdec_slave_addr[i], (0x58+j), 0x6D);
			}
			//bank1
			gpio_i2c_write(vdec_slave_addr[i], 0xFF, 0x01);  //re-set the video sequence...
			gpio_i2c_write(vdec_slave_addr[i], 0xC0, 0x10);
			gpio_i2c_write(vdec_slave_addr[i], 0xC1, 0x32);
			gpio_i2c_write(vdec_slave_addr[i], 0xC4, 0x10);
			gpio_i2c_write(vdec_slave_addr[i], 0xC5, 0x32);
			//bank3
			gpio_i2c_write(vdec_slave_addr[i], 0xFF, 0x03);
			for(j=0;j<4;j++)
			{
				if(vdec_mode == VDEC_PAL_960 || vdec_mode == VDEC_NTSC_960)
					gpio_i2c_write(vdec_slave_addr[i], (0x54+j), 0xBB);  //new modified.
				else
					gpio_i2c_write(vdec_slave_addr[i], (0x54+j), 0x8b);
			}
			
			gpio_i2c_write(vdec_slave_addr[i], 0x61, 0x53);
			gpio_i2c_write(vdec_slave_addr[i], 0x62, 0x89);
			gpio_i2c_write(vdec_slave_addr[i], 0x64, 0x22);
			gpio_i2c_write(vdec_slave_addr[i], 0x65, 0x22);
			for(j=0;j<4;j++)
			{
				if(vdec_mode == VDEC_PAL_960)
					gpio_i2c_write(vdec_slave_addr[i], (0x81+j*2), 0x28);
				else if(vdec_mode == VDEC_NTSC_960)
					gpio_i2c_write(vdec_slave_addr[i], (0x81+j*2), 0x08);
				else
					gpio_i2c_write(vdec_slave_addr[i], (0x81+j*2), 0x48);
			}
			#endif			
		}
		else if(chip_id[i] == NVP1918_R2 || chip_id[i] == NVP1118B_R2)
		{
			#ifdef VDEC_108M   //for nvp1118b r2 version
			gpio_i2c_write(vdec_slave_addr[i], 0xFF, 0x03);
			gpio_i2c_write(vdec_slave_addr[i], 0x64, 0x00);
			gpio_i2c_write(vdec_slave_addr[i], 0x65, 0x00);
			#else  // for nvp1918_R2 144MHZ mode.
			gpio_i2c_write(vdec_slave_addr[i], 0xFF, 0x00);
			for(j=0;j<8;j++)
			{
				if(vdec_mode == VDEC_PAL_960)
					gpio_i2c_write(vdec_slave_addr[i], (0x30+j%4+j/4*0x80), 0x11);  //Y_delay setting
				else if(vdec_mode == VDEC_NTSC_960)
					gpio_i2c_write(vdec_slave_addr[i], (0x30+j%4+j/4*0x80), 0x0a);
				else if(vdec_mode == VDEC_PAL)
					gpio_i2c_write(vdec_slave_addr[i], (0x30+j%4+j/4*0x80), 0x11);
				else
					gpio_i2c_write(vdec_slave_addr[i], (0x30+j%4+j/4*0x80), 0x12);

				if(vdec_mode == VDEC_PAL_960)
					gpio_i2c_write(vdec_slave_addr[i], (0x58+j%4+j/4*0x80), 0xb8);  
				else if(vdec_mode == VDEC_NTSC_960)
					gpio_i2c_write(vdec_slave_addr[i], (0x58+j%4+j/4*0x80), 0x9c);
				else if(vdec_mode == VDEC_PAL)
					gpio_i2c_write(vdec_slave_addr[i], (0x58+j%4+j/4*0x80), 0xa7);
				else
					gpio_i2c_write(vdec_slave_addr[i], (0x58+j%4+j/4*0x80), 0x96);
			}
			gpio_i2c_write(vdec_slave_addr[i], 0xFF, 0x03);			
			for(j=0;j<8;j++)
			{
				if(vdec_mode == VDEC_PAL_960 || vdec_mode == VDEC_NTSC_960)
					gpio_i2c_write(vdec_slave_addr[i], (0x81+j*2), 0x08);
				else
					gpio_i2c_write(vdec_slave_addr[i], (0x81+j*2), 0x48);
			}
			#endif			

		}
	}
}

void nvp1918_720h_nt(void)
{
	int i = 0;

	vdec_ntsc_common_init();
	
	for(i=0;i<vdec_cnt;i++)
	{	
		//bank 0
		gpio_i2c_write(vdec_slave_addr[i], 0xFF, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0x08, 0xA0);
		gpio_i2c_write(vdec_slave_addr[i], 0x09, 0xA0);
		gpio_i2c_write(vdec_slave_addr[i], 0x0A, 0xA0);
		gpio_i2c_write(vdec_slave_addr[i], 0x0B, 0xA0);
		gpio_i2c_write(vdec_slave_addr[i], 0x88, 0xA0);
		gpio_i2c_write(vdec_slave_addr[i], 0x89, 0xA0);
		gpio_i2c_write(vdec_slave_addr[i], 0x8A, 0xA0);
		gpio_i2c_write(vdec_slave_addr[i], 0x8B, 0xA0);
		
		gpio_i2c_write(vdec_slave_addr[i], 0x18, 0x22);
		gpio_i2c_write(vdec_slave_addr[i], 0x19, 0x22);
		gpio_i2c_write(vdec_slave_addr[i], 0x98, 0x22);
		gpio_i2c_write(vdec_slave_addr[i], 0x99, 0x22);
		
		gpio_i2c_write(vdec_slave_addr[i], 0x35, 0x82);
		gpio_i2c_write(vdec_slave_addr[i], 0xB5, 0x82);
		
		gpio_i2c_write(vdec_slave_addr[i], 0x40, 0x01);
		gpio_i2c_write(vdec_slave_addr[i], 0x41, 0x01);
		gpio_i2c_write(vdec_slave_addr[i], 0x42, 0x01);
		gpio_i2c_write(vdec_slave_addr[i], 0x43, 0x01);		
		gpio_i2c_write(vdec_slave_addr[i], 0xC0, 0x01);
		gpio_i2c_write(vdec_slave_addr[i], 0xC1, 0x01);
		gpio_i2c_write(vdec_slave_addr[i], 0xC2, 0x01);
		gpio_i2c_write(vdec_slave_addr[i], 0xC3, 0x01);
		
		gpio_i2c_write(vdec_slave_addr[i], 0x4C, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0x4D, 0x00);
   		gpio_i2c_write(vdec_slave_addr[i], 0x4E, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0x4F, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0xCC, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0xCD, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0xCE, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0xCF, 0x00);
		
		gpio_i2c_write(vdec_slave_addr[i], 0x50, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0x51, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0x52, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0x53, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0xD0, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0xD1, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0xD2, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0xD3, 0x00);
		
		gpio_i2c_write(vdec_slave_addr[i], 0x54, 0xF1);
		gpio_i2c_write(vdec_slave_addr[i], 0xD4, 0xF1);

#ifdef VDEC_108M
		gpio_i2c_write(vdec_slave_addr[i], 0x58, 0x20);
		gpio_i2c_write(vdec_slave_addr[i], 0x59, 0x20);
		gpio_i2c_write(vdec_slave_addr[i], 0x5A, 0x20);
		gpio_i2c_write(vdec_slave_addr[i], 0x5B, 0x20);
		gpio_i2c_write(vdec_slave_addr[i], 0xD8, 0x20);
		gpio_i2c_write(vdec_slave_addr[i], 0xD9, 0x20);
		gpio_i2c_write(vdec_slave_addr[i], 0xDA, 0x20);
		gpio_i2c_write(vdec_slave_addr[i], 0xDB, 0x20);
#else
		gpio_i2c_write(vdec_slave_addr[i], 0x58, 0x96);
		gpio_i2c_write(vdec_slave_addr[i], 0x59, 0x96);
		gpio_i2c_write(vdec_slave_addr[i], 0x5A, 0x96);
		gpio_i2c_write(vdec_slave_addr[i], 0x5B, 0x96);
		gpio_i2c_write(vdec_slave_addr[i], 0xD8, 0x96);
		gpio_i2c_write(vdec_slave_addr[i], 0xD9, 0x96);
		gpio_i2c_write(vdec_slave_addr[i], 0xDA, 0x96);
		gpio_i2c_write(vdec_slave_addr[i], 0xDB, 0x96);
#endif
		gpio_i2c_write(vdec_slave_addr[i], 0x64, 0x08);
		gpio_i2c_write(vdec_slave_addr[i], 0x65, 0x08);
		gpio_i2c_write(vdec_slave_addr[i], 0x66, 0x08);
		gpio_i2c_write(vdec_slave_addr[i], 0x67, 0x08);
		gpio_i2c_write(vdec_slave_addr[i], 0xe4, 0x08);
		gpio_i2c_write(vdec_slave_addr[i], 0xe5, 0x08);
		gpio_i2c_write(vdec_slave_addr[i], 0xe6, 0x08);
		gpio_i2c_write(vdec_slave_addr[i], 0xe7, 0x08);  
		//bank 1
		gpio_i2c_write(vdec_slave_addr[i], 0xFF, 0x01);
		gpio_i2c_write(vdec_slave_addr[i], 0xA0, 0x40);
		
		gpio_i2c_write(vdec_slave_addr[i], 0xC0, 0x54);
		gpio_i2c_write(vdec_slave_addr[i], 0xC1, 0x76);
		gpio_i2c_write(vdec_slave_addr[i], 0xC2, 0x10);
		gpio_i2c_write(vdec_slave_addr[i], 0xC3, 0x32);
		gpio_i2c_write(vdec_slave_addr[i], 0xC4, 0x54);
		gpio_i2c_write(vdec_slave_addr[i], 0xC5, 0x76);
		gpio_i2c_write(vdec_slave_addr[i], 0xC6, 0x10);
		gpio_i2c_write(vdec_slave_addr[i], 0xC7, 0x32);
		gpio_i2c_write(vdec_slave_addr[i], 0xC8, 0x88);
		gpio_i2c_write(vdec_slave_addr[i], 0xC9, 0x88);
		gpio_i2c_write(vdec_slave_addr[i], 0xCA, 0x03);  //enable data port A&B
		gpio_i2c_write(vdec_slave_addr[i], 0xCC, 0x70);
		gpio_i2c_write(vdec_slave_addr[i], 0xCD, 0x70);
		gpio_i2c_write(vdec_slave_addr[i], 0xCE, 0x10);
		gpio_i2c_write(vdec_slave_addr[i], 0xCF, 0x10);

		//bank 2
		gpio_i2c_write(vdec_slave_addr[i], 0xFF, 0x02);
		gpio_i2c_write(vdec_slave_addr[i], 0x12, 0x00);

		//bank 3
		gpio_i2c_write(vdec_slave_addr[i], 0xFF, 0x03);
		gpio_i2c_write(vdec_slave_addr[i], 0x20, 0x80);
		gpio_i2c_write(vdec_slave_addr[i], 0x25, 0xDC);
		gpio_i2c_write(vdec_slave_addr[i], 0x53, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0x68, 0xff);
		gpio_i2c_write(vdec_slave_addr[i], 0x69, 0xff);

#ifdef VDEC_108M
		gpio_i2c_write(vdec_slave_addr[i], 0x2c, 0x04);
		gpio_i2c_write(vdec_slave_addr[i], 0x62, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0x63, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0x81, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0x83, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0x85, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0x87, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0x89, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0x8B, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0x8D, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0x8F, 0x00);
#else  //36MHz	
		gpio_i2c_write(vdec_slave_addr[i], 0x62, 0x01);
		gpio_i2c_write(vdec_slave_addr[i], 0x63, 0xFF);
		gpio_i2c_write(vdec_slave_addr[i], 0x81, 0x40);
		gpio_i2c_write(vdec_slave_addr[i], 0x83, 0x40);
		gpio_i2c_write(vdec_slave_addr[i], 0x85, 0x40);
		gpio_i2c_write(vdec_slave_addr[i], 0x87, 0x40);
		gpio_i2c_write(vdec_slave_addr[i], 0x89, 0x40);
		gpio_i2c_write(vdec_slave_addr[i], 0x8B, 0x40);
		gpio_i2c_write(vdec_slave_addr[i], 0x8D, 0x40);
		gpio_i2c_write(vdec_slave_addr[i], 0x8F, 0x40);	
#endif		
	}
	reversion2_fix();
	audio_init(vdec_slave_addr[i], 16, 0, 0);	
	vdec_system_init();
	
	printk("\n\rNC NTSC SH720 MODE SETTING!!!");
	printk("\n\rNC 2012_07_30_version!!!");
}

void nvp1918_720h_pal(void)
{
	int i = 0;


	vdec_pal_common_init();
	
	for(i=0;i<vdec_cnt;i++)
	{		
		//bank 0
		gpio_i2c_write(vdec_slave_addr[i], 0xFF, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0x08, 0xdd);
		gpio_i2c_write(vdec_slave_addr[i], 0x09, 0xdd);
		gpio_i2c_write(vdec_slave_addr[i], 0x0A, 0xdd);
		gpio_i2c_write(vdec_slave_addr[i], 0x0B, 0xdd);
		gpio_i2c_write(vdec_slave_addr[i], 0x88, 0xdd);
		gpio_i2c_write(vdec_slave_addr[i], 0x89, 0xdd);
		gpio_i2c_write(vdec_slave_addr[i], 0x8A, 0xdd);
		gpio_i2c_write(vdec_slave_addr[i], 0x8B, 0xdd);
		
		gpio_i2c_write(vdec_slave_addr[i], 0x18, 0x33);
		gpio_i2c_write(vdec_slave_addr[i], 0x19, 0x33);
		gpio_i2c_write(vdec_slave_addr[i], 0x98, 0x33);
		gpio_i2c_write(vdec_slave_addr[i], 0x99, 0x33);
		
		gpio_i2c_write(vdec_slave_addr[i], 0x35, 0x02);
		gpio_i2c_write(vdec_slave_addr[i], 0xB5, 0x02);
		
		gpio_i2c_write(vdec_slave_addr[i], 0x40, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0x41, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0x42, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0x43, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0xC0, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0xC1, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0xC2, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0xC3, 0x00);
		
		gpio_i2c_write(vdec_slave_addr[i], 0x4C, 0x04);
		gpio_i2c_write(vdec_slave_addr[i], 0x4D, 0x04);
		gpio_i2c_write(vdec_slave_addr[i], 0x4E, 0x04);
		gpio_i2c_write(vdec_slave_addr[i], 0x4F, 0x04);
		gpio_i2c_write(vdec_slave_addr[i], 0xCC, 0x04);
		gpio_i2c_write(vdec_slave_addr[i], 0xCD, 0x04);
		gpio_i2c_write(vdec_slave_addr[i], 0xCE, 0x04);
		gpio_i2c_write(vdec_slave_addr[i], 0xCF, 0x04);
		gpio_i2c_write(vdec_slave_addr[i], 0x50, 0x04);
		gpio_i2c_write(vdec_slave_addr[i], 0x51, 0x04);
		gpio_i2c_write(vdec_slave_addr[i], 0x52, 0x04);
		gpio_i2c_write(vdec_slave_addr[i], 0x53, 0x04);
		gpio_i2c_write(vdec_slave_addr[i], 0xD0, 0x04);
		gpio_i2c_write(vdec_slave_addr[i], 0xD1, 0x04);
		gpio_i2c_write(vdec_slave_addr[i], 0xD2, 0x04);
		gpio_i2c_write(vdec_slave_addr[i], 0xD3, 0x04);
		gpio_i2c_write(vdec_slave_addr[i], 0x54, 0x01);
		gpio_i2c_write(vdec_slave_addr[i], 0xD4, 0x01);
#ifdef VDEC_108M
		gpio_i2c_write(vdec_slave_addr[i], 0x58, 0x30);
		gpio_i2c_write(vdec_slave_addr[i], 0x59, 0x30);
		gpio_i2c_write(vdec_slave_addr[i], 0x5A, 0x30);
		gpio_i2c_write(vdec_slave_addr[i], 0x5B, 0x30);
		gpio_i2c_write(vdec_slave_addr[i], 0xD8, 0x30);
		gpio_i2c_write(vdec_slave_addr[i], 0xD9, 0x30);
		gpio_i2c_write(vdec_slave_addr[i], 0xDA, 0x30);
		gpio_i2c_write(vdec_slave_addr[i], 0xDB, 0x30);
#else
		gpio_i2c_write(vdec_slave_addr[i], 0x58, 0xa7);
		gpio_i2c_write(vdec_slave_addr[i], 0x59, 0xa7);
		gpio_i2c_write(vdec_slave_addr[i], 0x5A, 0xa7);
		gpio_i2c_write(vdec_slave_addr[i], 0x5B, 0xa7);
		gpio_i2c_write(vdec_slave_addr[i], 0xD8, 0xa7);
		gpio_i2c_write(vdec_slave_addr[i], 0xD9, 0xa7);
		gpio_i2c_write(vdec_slave_addr[i], 0xDA, 0xa7);
		gpio_i2c_write(vdec_slave_addr[i], 0xDB, 0xa7);
#endif
		gpio_i2c_write(vdec_slave_addr[i], 0x64, 0x0D);
		gpio_i2c_write(vdec_slave_addr[i], 0x65, 0x0D);
		gpio_i2c_write(vdec_slave_addr[i], 0x66, 0x0D);
		gpio_i2c_write(vdec_slave_addr[i], 0x67, 0x0D);
		gpio_i2c_write(vdec_slave_addr[i], 0xE4, 0x0D);
		gpio_i2c_write(vdec_slave_addr[i], 0xE5, 0x0D);
		gpio_i2c_write(vdec_slave_addr[i], 0xE6, 0x0D);
		gpio_i2c_write(vdec_slave_addr[i], 0xE7, 0x0D);

		//bank 1
		gpio_i2c_write(vdec_slave_addr[i], 0xFF, 0x01);
		gpio_i2c_write(vdec_slave_addr[i], 0xA0, 0x4D);

		gpio_i2c_write(vdec_slave_addr[i], 0xC0, 0x54);
		gpio_i2c_write(vdec_slave_addr[i], 0xC1, 0x76);
		gpio_i2c_write(vdec_slave_addr[i], 0xC2, 0x10);
		gpio_i2c_write(vdec_slave_addr[i], 0xC3, 0x32);
		gpio_i2c_write(vdec_slave_addr[i], 0xC4, 0x54);
		gpio_i2c_write(vdec_slave_addr[i], 0xC5, 0x76);
		gpio_i2c_write(vdec_slave_addr[i], 0xC6, 0x10);
		gpio_i2c_write(vdec_slave_addr[i], 0xC7, 0x32);
		gpio_i2c_write(vdec_slave_addr[i], 0xC8, 0x88);
		gpio_i2c_write(vdec_slave_addr[i], 0xC9, 0x88);
		gpio_i2c_write(vdec_slave_addr[i], 0xCA, 0x03);  //enable data port A&B	
		gpio_i2c_write(vdec_slave_addr[i], 0xCC, 0x70);
		gpio_i2c_write(vdec_slave_addr[i], 0xCD, 0x70);
		gpio_i2c_write(vdec_slave_addr[i], 0xCE, 0x10);
		gpio_i2c_write(vdec_slave_addr[i], 0xCF, 0x10);


    //bank 2
		gpio_i2c_write(vdec_slave_addr[i], 0xFF, 0x02);
		gpio_i2c_write(vdec_slave_addr[i], 0x12, 0x00);

		//bank 3
		gpio_i2c_write(vdec_slave_addr[i], 0xFF, 0x03);
		gpio_i2c_write(vdec_slave_addr[i], 0x20, 0x80);
		gpio_i2c_write(vdec_slave_addr[i], 0x25, 0xCC);
		gpio_i2c_write(vdec_slave_addr[i], 0x53, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0x68, 0xff);
		gpio_i2c_write(vdec_slave_addr[i], 0x69, 0xff);
#ifdef VDEC_108M
		gpio_i2c_write(vdec_slave_addr[i], 0x62, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0x63, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0x81, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0x83, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0x85, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0x87, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0x89, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0x8B, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0x8D, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0x8F, 0x00);
#else
		
		gpio_i2c_write(vdec_slave_addr[i], 0x62, 0x01);
		gpio_i2c_write(vdec_slave_addr[i], 0x63, 0xFF);
		gpio_i2c_write(vdec_slave_addr[i], 0x81, 0x40);
		gpio_i2c_write(vdec_slave_addr[i], 0x83, 0x40);
		gpio_i2c_write(vdec_slave_addr[i], 0x85, 0x40);
		gpio_i2c_write(vdec_slave_addr[i], 0x87, 0x40);
		gpio_i2c_write(vdec_slave_addr[i], 0x89, 0x40);
		gpio_i2c_write(vdec_slave_addr[i], 0x8B, 0x40);
		gpio_i2c_write(vdec_slave_addr[i], 0x8D, 0x40);
		gpio_i2c_write(vdec_slave_addr[i], 0x8F, 0x40);	
#endif
		
	}	
	reversion2_fix();
	audio_init(vdec_slave_addr[i], 16, 0, 0);	
	
	vdec_system_init();
	
	printk("\n\rNC PAL SH720 MODE SETTING!!!");
	printk("\n\rNC 2012_07_30_version!!!");
}

void nvp1918_960h_nt(void)
{
	int i = 0;


	printk("common_init\n");
	vdec_ntsc_common_init();
	//vdec_set_pll_72M();
	
	printk("register_init\n");
	for(i=0;i<vdec_cnt;i++)
	{		
		//bank 0
		gpio_i2c_write(vdec_slave_addr[i], 0xFF, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0x08, 0xA0);
		gpio_i2c_write(vdec_slave_addr[i], 0x09, 0xA0);
		gpio_i2c_write(vdec_slave_addr[i], 0x0A, 0xA0);
		gpio_i2c_write(vdec_slave_addr[i], 0x0B, 0xA0);
		gpio_i2c_write(vdec_slave_addr[i], 0x88, 0xA0);
		gpio_i2c_write(vdec_slave_addr[i], 0x89, 0xA0);
		gpio_i2c_write(vdec_slave_addr[i], 0x8A, 0xA0);
		gpio_i2c_write(vdec_slave_addr[i], 0x8B, 0xA0);
		
		gpio_i2c_write(vdec_slave_addr[i], 0x18, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0x19, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0x98, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0x99, 0x00);
		
		gpio_i2c_write(vdec_slave_addr[i], 0x35, 0x82);
		gpio_i2c_write(vdec_slave_addr[i], 0xB5, 0x82);
		gpio_i2c_write(vdec_slave_addr[i], 0x40, 0x01);
		gpio_i2c_write(vdec_slave_addr[i], 0x41, 0x01);
		gpio_i2c_write(vdec_slave_addr[i], 0x42, 0x01);
		gpio_i2c_write(vdec_slave_addr[i], 0x43, 0x01);
		gpio_i2c_write(vdec_slave_addr[i], 0xC0, 0x01);
		gpio_i2c_write(vdec_slave_addr[i], 0xC1, 0x01);
		gpio_i2c_write(vdec_slave_addr[i], 0xC2, 0x01);
		gpio_i2c_write(vdec_slave_addr[i], 0xC3, 0x01);
		gpio_i2c_write(vdec_slave_addr[i], 0x4C, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0x4D, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0x4E, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0x4F, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0xCC, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0xCD, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0xCE, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0xCF, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0x50, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0x51, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0x52, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0x53, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0xD0, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0xD1, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0xD2, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0xD3, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0x54, 0xF1);
		gpio_i2c_write(vdec_slave_addr[i], 0xD4, 0xF1);
		/*gpio_i2c_write(vdec_slave_addr[i], 0x58, 0x9c);  //h_delay adjust...
		gpio_i2c_write(vdec_slave_addr[i], 0x59, 0x9c);
		gpio_i2c_write(vdec_slave_addr[i], 0x5A, 0x9c);
		gpio_i2c_write(vdec_slave_addr[i], 0x5B, 0x9c);
		gpio_i2c_write(vdec_slave_addr[i], 0xD8, 0x9c);
		gpio_i2c_write(vdec_slave_addr[i], 0xD9, 0x9c);
		gpio_i2c_write(vdec_slave_addr[i], 0xDA, 0x9c);
		gpio_i2c_write(vdec_slave_addr[i], 0xDB, 0x9c);  */
		gpio_i2c_write(vdec_slave_addr[i], 0x64, 0x08);
		gpio_i2c_write(vdec_slave_addr[i], 0x65, 0x08);
		gpio_i2c_write(vdec_slave_addr[i], 0x66, 0x08);
		gpio_i2c_write(vdec_slave_addr[i], 0x67, 0x08);
		gpio_i2c_write(vdec_slave_addr[i], 0xE4, 0x08);
		gpio_i2c_write(vdec_slave_addr[i], 0xE5, 0x08);
		gpio_i2c_write(vdec_slave_addr[i], 0xE6, 0x08);
		gpio_i2c_write(vdec_slave_addr[i], 0xE7, 0x08);
		
		//bank 1
		gpio_i2c_write(vdec_slave_addr[i], 0xFF, 0x01);
		gpio_i2c_write(vdec_slave_addr[i], 0xA0, 0x40);

#ifdef VDEC_144M
		gpio_i2c_write(vdec_slave_addr[i], 0xC0, 0x54);
		gpio_i2c_write(vdec_slave_addr[i], 0xC1, 0x76);
		gpio_i2c_write(vdec_slave_addr[i], 0xC2, 0x10);
		gpio_i2c_write(vdec_slave_addr[i], 0xC3, 0x32);
		gpio_i2c_write(vdec_slave_addr[i], 0xC4, 0x54);
		gpio_i2c_write(vdec_slave_addr[i], 0xC5, 0x76);
		gpio_i2c_write(vdec_slave_addr[i], 0xC6, 0x10);
		gpio_i2c_write(vdec_slave_addr[i], 0xC7, 0x32);
		gpio_i2c_write(vdec_slave_addr[i], 0xC8, 0x88);
		gpio_i2c_write(vdec_slave_addr[i], 0xC9, 0x88);
		gpio_i2c_write(vdec_slave_addr[i], 0xCA, 0x03);  //enable data port A&B
		gpio_i2c_write(vdec_slave_addr[i], 0xCC, 0x70);
		gpio_i2c_write(vdec_slave_addr[i], 0xCD, 0x70);
		gpio_i2c_write(vdec_slave_addr[i], 0xCE, 0x10);
		gpio_i2c_write(vdec_slave_addr[i], 0xCF, 0x10);
#endif

    //bank 2
		gpio_i2c_write(vdec_slave_addr[i], 0xFF, 0x02);
		gpio_i2c_write(vdec_slave_addr[i], 0x12, 0xFF);

		//bank 3
		gpio_i2c_write(vdec_slave_addr[i], 0xFF, 0x03);
		gpio_i2c_write(vdec_slave_addr[i], 0x20, 0x80);
		
		gpio_i2c_write(vdec_slave_addr[i], 0x62, 0x01);
		//gpio_i2c_write(vdec_slave_addr[i], 0x68, 0xff);
		//gpio_i2c_write(vdec_slave_addr[i], 0x69, 0xff);

		gpio_i2c_write(vdec_slave_addr[i], 0x25, 0xDC);
		gpio_i2c_write(vdec_slave_addr[i], 0x53, 0xFF);
		gpio_i2c_write(vdec_slave_addr[i], 0x63, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0x80, 0x40);
		gpio_i2c_write(vdec_slave_addr[i], 0x81, 0x08);
		gpio_i2c_write(vdec_slave_addr[i], 0x83, 0x08);
		gpio_i2c_write(vdec_slave_addr[i], 0x85, 0x08);
		gpio_i2c_write(vdec_slave_addr[i], 0x87, 0x08);
		gpio_i2c_write(vdec_slave_addr[i], 0x89, 0x08);
		gpio_i2c_write(vdec_slave_addr[i], 0x8B, 0x08);
		gpio_i2c_write(vdec_slave_addr[i], 0x8D, 0x08);
		gpio_i2c_write(vdec_slave_addr[i], 0x8F, 0x08);	
	}	
	reversion2_fix();
	audio_init(vdec_slave_addr[i], 16, 0, 0);	
	printk("System_init\n");
	vdec_system_init();	
	printk("\n\rNC SW RESET Forcing Completed!!!");
	printk("\n\rNC NTSC 960H MODE SETTING!!!");
	printk("\n\rNC 2012_07_30_version!!!");
}

void nvp1918_960h_pal( void )
{
	int i=0;

	vdec_pal_common_init();
	//vdec_set_pll_72M();
	

	for(i=0;i<vdec_cnt;i++)
	{		
		//bank 0
		gpio_i2c_write(vdec_slave_addr[i], 0xFF, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0x08, 0xdd);
		gpio_i2c_write(vdec_slave_addr[i], 0x09, 0xdd);
		gpio_i2c_write(vdec_slave_addr[i], 0x0A, 0xdd);
		gpio_i2c_write(vdec_slave_addr[i], 0x0B, 0xdd);
		gpio_i2c_write(vdec_slave_addr[i], 0x88, 0xdd);
		gpio_i2c_write(vdec_slave_addr[i], 0x89, 0xdd);
		gpio_i2c_write(vdec_slave_addr[i], 0x8A, 0xdd);
		gpio_i2c_write(vdec_slave_addr[i], 0x8B, 0xdd);
		gpio_i2c_write(vdec_slave_addr[i], 0x18, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0x19, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0x98, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0x99, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0x35, 0x02);
		gpio_i2c_write(vdec_slave_addr[i], 0xB5, 0x02);
		gpio_i2c_write(vdec_slave_addr[i], 0x40, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0x41, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0x42, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0x43, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0xC0, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0xC1, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0xC2, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0xC3, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0x4C, 0x04);
		gpio_i2c_write(vdec_slave_addr[i], 0x4D, 0x04);
		gpio_i2c_write(vdec_slave_addr[i], 0x4E, 0x04);
		gpio_i2c_write(vdec_slave_addr[i], 0x4F, 0x04);
		gpio_i2c_write(vdec_slave_addr[i], 0xCC, 0x04);
		gpio_i2c_write(vdec_slave_addr[i], 0xCD, 0x04);
		gpio_i2c_write(vdec_slave_addr[i], 0xCE, 0x04);
		gpio_i2c_write(vdec_slave_addr[i], 0xCF, 0x04);
		gpio_i2c_write(vdec_slave_addr[i], 0x50, 0x04);
		gpio_i2c_write(vdec_slave_addr[i], 0x51, 0x04);
		gpio_i2c_write(vdec_slave_addr[i], 0x52, 0x04);
		gpio_i2c_write(vdec_slave_addr[i], 0x53, 0x04);
		gpio_i2c_write(vdec_slave_addr[i], 0xD0, 0x04);
		gpio_i2c_write(vdec_slave_addr[i], 0xD1, 0x04);
		gpio_i2c_write(vdec_slave_addr[i], 0xD2, 0x04);
		gpio_i2c_write(vdec_slave_addr[i], 0xD3, 0x04);
		gpio_i2c_write(vdec_slave_addr[i], 0x54, 0x01);
		gpio_i2c_write(vdec_slave_addr[i], 0xD4, 0x01);
		/*gpio_i2c_write(vdec_slave_addr[i], 0x58, 0xb8);
		gpio_i2c_write(vdec_slave_addr[i], 0x59, 0xb8);
		gpio_i2c_write(vdec_slave_addr[i], 0x5A, 0xb8);
		gpio_i2c_write(vdec_slave_addr[i], 0x5B, 0xb8);
		gpio_i2c_write(vdec_slave_addr[i], 0xD8, 0xb8);
		gpio_i2c_write(vdec_slave_addr[i], 0xD9, 0xb8);
		gpio_i2c_write(vdec_slave_addr[i], 0xDA, 0xb8);
		gpio_i2c_write(vdec_slave_addr[i], 0xDB, 0xb8); */
		gpio_i2c_write(vdec_slave_addr[i], 0x64, 0x0D);
		gpio_i2c_write(vdec_slave_addr[i], 0x65, 0x0D);
		gpio_i2c_write(vdec_slave_addr[i], 0x66, 0x0D);
		gpio_i2c_write(vdec_slave_addr[i], 0x67, 0x0D);
		gpio_i2c_write(vdec_slave_addr[i], 0xE4, 0x0D);
		gpio_i2c_write(vdec_slave_addr[i], 0xE5, 0x0D);
		gpio_i2c_write(vdec_slave_addr[i], 0xE6, 0x0D);
		gpio_i2c_write(vdec_slave_addr[i], 0xE7, 0x0D);

		//bank 1
		gpio_i2c_write(vdec_slave_addr[i], 0xFF, 0x01);
		gpio_i2c_write(vdec_slave_addr[i], 0xA0, 0x4D);

#ifdef VDEC_144M
		gpio_i2c_write(vdec_slave_addr[i], 0xC0, 0x54);
		gpio_i2c_write(vdec_slave_addr[i], 0xC1, 0x76);
		gpio_i2c_write(vdec_slave_addr[i], 0xC2, 0x10);
		gpio_i2c_write(vdec_slave_addr[i], 0xC3, 0x32);
		gpio_i2c_write(vdec_slave_addr[i], 0xC4, 0x54);
		gpio_i2c_write(vdec_slave_addr[i], 0xC5, 0x76);
		gpio_i2c_write(vdec_slave_addr[i], 0xC6, 0x10);
		gpio_i2c_write(vdec_slave_addr[i], 0xC7, 0x32);
		gpio_i2c_write(vdec_slave_addr[i], 0xC8, 0x88);
		gpio_i2c_write(vdec_slave_addr[i], 0xC9, 0x88);
		gpio_i2c_write(vdec_slave_addr[i], 0xCA, 0x03);  //enable data port A&B
		gpio_i2c_write(vdec_slave_addr[i], 0xCC, 0x70);
		gpio_i2c_write(vdec_slave_addr[i], 0xCD, 0x70);
		gpio_i2c_write(vdec_slave_addr[i], 0xCE, 0x10);
		gpio_i2c_write(vdec_slave_addr[i], 0xCF, 0x10);
#endif

    //bank 2
		gpio_i2c_write(vdec_slave_addr[i], 0xFF, 0x02);
		gpio_i2c_write(vdec_slave_addr[i], 0x12, 0xFF);
   
		//bank 3
		gpio_i2c_write(vdec_slave_addr[i], 0xFF, 0x03);
		gpio_i2c_write(vdec_slave_addr[i], 0x20, 0x80);
		gpio_i2c_write(vdec_slave_addr[i], 0x62, 0x01);
		gpio_i2c_write(vdec_slave_addr[i], 0x25, 0xCC);
		gpio_i2c_write(vdec_slave_addr[i], 0x53, 0xFF);
		gpio_i2c_write(vdec_slave_addr[i], 0x63, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0x81, 0x08);
		gpio_i2c_write(vdec_slave_addr[i], 0x83, 0x08);
		gpio_i2c_write(vdec_slave_addr[i], 0x85, 0x08);
		gpio_i2c_write(vdec_slave_addr[i], 0x87, 0x08);
		gpio_i2c_write(vdec_slave_addr[i], 0x89, 0x08);
		gpio_i2c_write(vdec_slave_addr[i], 0x8B, 0x08);
		gpio_i2c_write(vdec_slave_addr[i], 0x8D, 0x08);
		gpio_i2c_write(vdec_slave_addr[i], 0x8F, 0x08);			
	}
	reversion2_fix();
	audio_init(vdec_slave_addr[i], 16, 0, 0);	
	vdec_system_init();
	printk("\n\rNC SW RESET Forcing Completed!!!");
	printk("\n\rNC PAL 960H MODE SETTING!!!");
	printk("\n\rNC 2012_07_30_version!!!");
}


void vdec_video_set_contrast(unsigned int ch, unsigned int value, unsigned int v_format)
{
    int num;
	int i = 0;

	if(ch != 0xff)
    {
		if(ch < 8)
		{
			gpio_i2c_write(vdec_slave_addr[0], 0xFF, 0x00);
			if(value >= 100)
			{
				gpio_i2c_write(vdec_slave_addr[0], (ch/4)?(0x90+(ch%4)):(0x10+(ch%4)), 
													(vdec_contrast_tbl[v_format]+value-100));
			}
      	  	   	else
			{
				gpio_i2c_write(vdec_slave_addr[0], (ch/4)?(0x90+(ch%4)):(0x10+(ch%4)), 
													(vdec_contrast_tbl[v_format]+(0xff-(98-value))));
			}
		}
		else
		{
			ch-=8;
			gpio_i2c_write(vdec_slave_addr[1], 0xFF, 0x00);
			if(value >= 100)
			{
				gpio_i2c_write(vdec_slave_addr[1], (ch/4)?(0x90+(ch%4)):(0x10+(ch%4)), 
													(vdec_contrast_tbl[v_format]+value-100));
			}
   	  	   	else
			{
				gpio_i2c_write(vdec_slave_addr[1], (ch/4)?(0x90+(ch%4)):(0x10+(ch%4)), 
													(vdec_contrast_tbl[v_format]+(0xff-(98-value))));
			}
	
		}
	}
	else
	{
		for(i=0;i<vdec_cnt;i++)
		{
			gpio_i2c_write(vdec_slave_addr[i], 0xFF, 0x00);
			for(num=0; num<8; num++)
			{
				if(value >= 100)
					gpio_i2c_write(vdec_slave_addr[i], (num/4%2)?(0x90+(num%4)):(0x10+(num%4)), 
																(vdec_contrast_tbl[v_format]+value-100));
              	else
					gpio_i2c_write(vdec_slave_addr[i], (num/4%2)?(0x90+(num%4)):(0x10+(num%4)), 
																(vdec_contrast_tbl[v_format]+(0xff-(98-value))));
			}
		}
	}
}

void vdec_video_set_brightness(unsigned int ch, unsigned int value, unsigned int v_format)
{
    int num;
	int i=0;
	
	if(ch != SET_ALL_CH)
    {
		if(ch<8)
		{
			gpio_i2c_write(vdec_slave_addr[0], 0xFF, 0x00);
			if(value >= 100)
			{
				gpio_i2c_write(vdec_slave_addr[0], (ch/4)?(0x8c+(ch%4)):(0x0c+(ch%4)), 
																(vdec_brightness_tbl[v_format]+value-100));
			}
       	   	else
			{
				gpio_i2c_write(vdec_slave_addr[0], (ch/4)?(0x8c+(ch%4)):(0x0c+(ch%4)), 
																(vdec_brightness_tbl[v_format]+(0xff-(98-value))));
			}
		}
		else
		{
			ch=-8;
			gpio_i2c_write(vdec_slave_addr[1], 0xFF, 0x00);
			if(value >= 100)
			{
				gpio_i2c_write(vdec_slave_addr[1], (ch/4)?(0x8c+(ch%4)):(0x0c+(ch%4)), 
																(vdec_brightness_tbl[v_format]+value-100));
			}
       	   	else
			{
				gpio_i2c_write(vdec_slave_addr[1], (ch/4)?(0x8c+(ch%4)):(0x0c+(ch%4)), 
																(vdec_brightness_tbl[v_format]+(0xff-(98-value))));
			}
		}
	}
	else
	{
		for(i=0;i<vdec_cnt;i++)
		{
			gpio_i2c_write(vdec_slave_addr[i], 0xFF, 0x00);	
			for(num=0; num<8; num++)
			{
				if(value >= 100)
				{
					gpio_i2c_write(vdec_slave_addr[i], (num/4%2)?(0x8c+(num%4)):(0x0c+(num%4)), 
																(vdec_brightness_tbl[v_format]+value-100));
				}
              	else
				{
					gpio_i2c_write(vdec_slave_addr[i], (num/4%2)?(0x8c+(num%4)):(0x0c+(num%4)), 
																(vdec_brightness_tbl[v_format]+(0xff-(98-value))));
				}
			}
		}
	}
}

void vdec_video_set_saturation(unsigned int ch, unsigned int value, unsigned int v_format)
{
    int num;
	int i = 0;
	

	if(ch != SET_ALL_CH)
    {
		if(ch<8)
		{
			gpio_i2c_write(vdec_slave_addr[0], 0xFF, 0x00);
			gpio_i2c_write(vdec_slave_addr[0], (ch/4)?(0xbc+(ch%4)):(0x3c+(ch%4)), 
														(vdec_saturation_tbl[v_format]+value-100));
		}
		else
		{
			gpio_i2c_write(vdec_slave_addr[1], 0xFF, 0x00);
			gpio_i2c_write(vdec_slave_addr[1], (ch/4)?(0xbc+(ch%4)):(0x3c+(ch%4)), 
														(vdec_saturation_tbl[v_format]+value-100));
		}
	}
	else
	{
		for(i=0;i<vdec_cnt;i++)
		{
			gpio_i2c_write(vdec_slave_addr[i], 0xFF, 0x00);
			for(num=0; num<8; num++)
			{
				gpio_i2c_write(vdec_slave_addr[i], (num/4%2)?(0xbc+(num%4)):(0x3c+(num%4)), 
																(vdec_saturation_tbl[v_format]+value-100));
			}
		}
	}
}

void vdec_video_set_hue(unsigned int ch, unsigned int value, unsigned int v_format)
{
    int num;
	int i = 0;
	

	if(ch != SET_ALL_CH)
    {
		if(ch<8)
		{
			gpio_i2c_write(vdec_slave_addr[0], 0xFF, 0x00);
			gpio_i2c_write(vdec_slave_addr[0], (ch/4)?(0xc0+(ch%4)):(0x40+(ch%4)), (vdec_hue_tbl[v_format]+value-100));
		}
		else
		{
			ch-=8;
			gpio_i2c_write(vdec_slave_addr[1], 0xFF, 0x00);
			gpio_i2c_write(vdec_slave_addr[1], (ch/4)?(0xc0+(ch%4)):(0x40+(ch%4)), (vdec_hue_tbl[v_format]+value-100));
		}
	}
	else
	{
		for(i=0;i<vdec_cnt;i++)
		{
			gpio_i2c_write(vdec_slave_addr[i], 0xFF, 0x00);
			for(num=0; num<8; num++)
			{
				gpio_i2c_write(vdec_slave_addr[i], (num/4%2)?(0xc0+(num%4)):(0x40+(num%4)), 
																(vdec_hue_tbl[v_format]+value-100));
			}
		}
	}
}

void vdec_write_table(unsigned char chip_addr, unsigned char addr, unsigned char *tbl_ptr, unsigned char tbl_cnt)
{
	unsigned char i = 0;
	
	for(i = 0; i < tbl_cnt; i ++)
	{
		gpio_i2c_write(chip_addr, (addr + i), *(tbl_ptr + i));
	}
}


void vdec_low_resoultion_enable(unsigned char ch)
{
	unsigned int i = 0;
	//unsigned int ii = 0;

	printk("vdec_low_resoultion_enable\n");
 
	if(ch != SET_ALL_CH)
	{
		if(ch<8)
		{
			if((vdec_mode == VDEC_NTSC_960) || (vdec_mode == VDEC_NTSC))
			{
				gpio_i2c_write(vdec_slave_addr[0], 0xFF, 0x00);
				gpio_i2c_write(vdec_slave_addr[0], (ch/4) ? (0x88 + ch%4) : (0x08 + ch%4), 0xE0);
				gpio_i2c_write(vdec_slave_addr[0], (ch/4) ? (0x74 + ch%4) : (0x14 + ch%4), 0x00);
				gpio_i2c_write(vdec_slave_addr[0], 0xFF, 0x03);
				gpio_i2c_write(vdec_slave_addr[0], 0x15 + ch,  0x38);
				gpio_i2c_write(vdec_slave_addr[0], 0x50, 0x00);	
			}
			else
			{
				gpio_i2c_write(vdec_slave_addr[0], 0xFF, 0x00);
				gpio_i2c_write(vdec_slave_addr[0], (ch/4) ? (0x88 + ch%4) : (0x08 + ch%4), 0xFD);
				gpio_i2c_write(vdec_slave_addr[0], (ch/4) ? (0x74 + ch%4) : (0x14 + ch%4), 0x00);
				gpio_i2c_write(vdec_slave_addr[0], 0xFF, 0x03);
				gpio_i2c_write(vdec_slave_addr[0], 0x15 + ch,  0x31);
				gpio_i2c_write(vdec_slave_addr[0], 0x50, 0xff);
			}
		}
		else
		{
			ch-=8;
			if((vdec_mode == VDEC_NTSC_960) || (vdec_mode == VDEC_NTSC))
			{
				gpio_i2c_write(vdec_slave_addr[1], 0xFF, 0x00);
				gpio_i2c_write(vdec_slave_addr[1], (ch/4) ? (0x88 + ch%4) : (0x08 + ch%4), 0xE0);
				gpio_i2c_write(vdec_slave_addr[1], (ch/4) ? (0x74 + ch%4) : (0x14 + ch%4), 0x00);
				gpio_i2c_write(vdec_slave_addr[1], 0xFF, 0x03);
				gpio_i2c_write(vdec_slave_addr[1], 0x15 + ch,  0x38);
				gpio_i2c_write(vdec_slave_addr[1], 0x50, 0x00);	
			}
			else
			{
				gpio_i2c_write(vdec_slave_addr[1], 0xFF, 0x00);
				gpio_i2c_write(vdec_slave_addr[1], (ch/4) ? (0x88 + ch%4) : (0x08 + ch%4), 0xFD);
				gpio_i2c_write(vdec_slave_addr[1], (ch/4) ? (0x74 + ch%4) : (0x14 + ch%4), 0x00);
				gpio_i2c_write(vdec_slave_addr[1], 0xFF, 0x03);
				gpio_i2c_write(vdec_slave_addr[1], 0x15 + ch,  0x31);
				gpio_i2c_write(vdec_slave_addr[1], 0x50, 0xff);
			}

		}
	}
	else
	{
		for(i=0;i<vdec_cnt;i++) 
		{
			if((vdec_mode == VDEC_NTSC_960) || (vdec_mode == VDEC_NTSC))
			{
				gpio_i2c_write(vdec_slave_addr[i], 0xFF, 0x00);
				gpio_i2c_write(vdec_slave_addr[i], 0x08, 0xE0);
				gpio_i2c_write(vdec_slave_addr[i], 0x09, 0xE0);
				gpio_i2c_write(vdec_slave_addr[i], 0x0A, 0xE0);
				gpio_i2c_write(vdec_slave_addr[i], 0x0B, 0xE0);
				gpio_i2c_write(vdec_slave_addr[i], 0x88, 0xE0);
				gpio_i2c_write(vdec_slave_addr[i], 0x89, 0xE0);
				gpio_i2c_write(vdec_slave_addr[i], 0x8A, 0xE0);
				gpio_i2c_write(vdec_slave_addr[i], 0x8B, 0xE0);
        
				gpio_i2c_write(vdec_slave_addr[i], 0x14, 0x00);
				gpio_i2c_write(vdec_slave_addr[i], 0x15, 0x00);
				gpio_i2c_write(vdec_slave_addr[i], 0x16, 0x00);
				gpio_i2c_write(vdec_slave_addr[i], 0x17, 0x00);
				gpio_i2c_write(vdec_slave_addr[i], 0x94, 0x00);
				gpio_i2c_write(vdec_slave_addr[i], 0x95, 0x00);
				gpio_i2c_write(vdec_slave_addr[i], 0x96, 0x00);
				gpio_i2c_write(vdec_slave_addr[i], 0x97, 0x00);
        
				gpio_i2c_write(vdec_slave_addr[i], 0xFF, 0x03);
				gpio_i2c_write(vdec_slave_addr[i], 0x90, 0x38);
				gpio_i2c_write(vdec_slave_addr[i], 0x91, 0x38);
				gpio_i2c_write(vdec_slave_addr[i], 0x92, 0x38);
				gpio_i2c_write(vdec_slave_addr[i], 0x93, 0x38);
				gpio_i2c_write(vdec_slave_addr[i], 0x94, 0x38);
				gpio_i2c_write(vdec_slave_addr[i], 0x95, 0x38);
				gpio_i2c_write(vdec_slave_addr[i], 0x96, 0x38);
				gpio_i2c_write(vdec_slave_addr[i], 0x97, 0x38);
				gpio_i2c_write(vdec_slave_addr[i], 0x50, 0x00);	
			}
			else
			{
				gpio_i2c_write(vdec_slave_addr[i], 0xFF, 0x00);
				gpio_i2c_write(vdec_slave_addr[i], 0x08, 0xFD);
				gpio_i2c_write(vdec_slave_addr[i], 0x09, 0xFD);
				gpio_i2c_write(vdec_slave_addr[i], 0x0A, 0xFD);
				gpio_i2c_write(vdec_slave_addr[i], 0x0B, 0xFD);
				gpio_i2c_write(vdec_slave_addr[i], 0x88, 0xFD);
				gpio_i2c_write(vdec_slave_addr[i], 0x89, 0xFD);
				gpio_i2c_write(vdec_slave_addr[i], 0x8A, 0xFD);
				gpio_i2c_write(vdec_slave_addr[i], 0x8B, 0xFD);
				gpio_i2c_write(vdec_slave_addr[i], 0x14, 0x00);
				gpio_i2c_write(vdec_slave_addr[i], 0x15, 0x00);
				gpio_i2c_write(vdec_slave_addr[i], 0x16, 0x00);
				gpio_i2c_write(vdec_slave_addr[i], 0x17, 0x00);
				gpio_i2c_write(vdec_slave_addr[i], 0x94, 0x00);
				gpio_i2c_write(vdec_slave_addr[i], 0x95, 0x00);
				gpio_i2c_write(vdec_slave_addr[i], 0x96, 0x00);
				gpio_i2c_write(vdec_slave_addr[i], 0x97, 0x00);
				gpio_i2c_write(vdec_slave_addr[i], 0xFF, 0x03);
				gpio_i2c_write(vdec_slave_addr[i], 0x90, 0x31);
				gpio_i2c_write(vdec_slave_addr[i], 0x91, 0x31);
				gpio_i2c_write(vdec_slave_addr[i], 0x92, 0x31);
				gpio_i2c_write(vdec_slave_addr[i], 0x93, 0x31);
				gpio_i2c_write(vdec_slave_addr[i], 0x94, 0x31);
				gpio_i2c_write(vdec_slave_addr[i], 0x95, 0x31);
				gpio_i2c_write(vdec_slave_addr[i], 0x96, 0x31);
				gpio_i2c_write(vdec_slave_addr[i], 0x97, 0x31);
				gpio_i2c_write(vdec_slave_addr[i], 0x50, 0xFF);	
			}
		}
	}
}

void vdec_low_resoultion_disable(unsigned char ch)
{
	unsigned int i = 0;
	printk("vdec_low_resoultion_disable\n");

	if(ch != SET_ALL_CH)
	{
		if(ch<8)
		{
			if((vdec_mode == VDEC_NTSC_960) || (vdec_mode == VDEC_NTSC))
			{
				gpio_i2c_write(vdec_slave_addr[0], 0xFF, 0x00);
				gpio_i2c_write(vdec_slave_addr[0], (ch/4) ? (0x88 + ch%4) : (0x08 + ch%4), 0xa0);
				gpio_i2c_write(vdec_slave_addr[0], (ch/4) ? (0x74 + ch%4) : (0x14 + ch%4), 0x80);
				gpio_i2c_write(vdec_slave_addr[0], 0xFF, 0x03);
				gpio_i2c_write(vdec_slave_addr[0], 0x15 + ch,  0x08);
				gpio_i2c_write(vdec_slave_addr[0], 0x50, 0x00);	
			}
			else
			{
				gpio_i2c_write(vdec_slave_addr[0], 0xFF, 0x00);
				gpio_i2c_write(vdec_slave_addr[0], (ch/4) ? (0x88 + ch%4) : (0x08 + ch%4), 0xdd);
				gpio_i2c_write(vdec_slave_addr[0], (ch/4) ? (0x74 + ch%4) : (0x14 + ch%4), 0x80);
				gpio_i2c_write(vdec_slave_addr[0], 0xFF, 0x03);
				gpio_i2c_write(vdec_slave_addr[0], 0x15 + ch,  0x01);
				gpio_i2c_write(vdec_slave_addr[0], 0x50, 0x00);
			}
		}
		else
		{
			if((vdec_mode == VDEC_NTSC_960) || (vdec_mode == VDEC_NTSC))
			{
				gpio_i2c_write(vdec_slave_addr[1], 0xFF, 0x00);
				gpio_i2c_write(vdec_slave_addr[1], (ch/4) ? (0x88 + ch%4) : (0x08 + ch%4), 0xa0);
				gpio_i2c_write(vdec_slave_addr[1], (ch/4) ? (0x74 + ch%4) : (0x14 + ch%4), 0x80);
				gpio_i2c_write(vdec_slave_addr[1], 0xFF, 0x03);
				gpio_i2c_write(vdec_slave_addr[1], 0x15 + ch,  0x08);
				gpio_i2c_write(vdec_slave_addr[1], 0x50, 0x00);	
			}
			else
			{
				gpio_i2c_write(vdec_slave_addr[1], 0xFF, 0x00);
				gpio_i2c_write(vdec_slave_addr[1], (ch/4) ? (0x88 + ch%4) : (0x08 + ch%4), 0xdd);
				gpio_i2c_write(vdec_slave_addr[1], (ch/4) ? (0x74 + ch%4) : (0x14 + ch%4), 0x80);
				gpio_i2c_write(vdec_slave_addr[1], 0xFF, 0x03);
				gpio_i2c_write(vdec_slave_addr[1], 0x15 + ch,  0x01);
				gpio_i2c_write(vdec_slave_addr[1], 0x50, 0x00);
			}
	
		}
	}
	else
	{
		for(i=0;i<vdec_cnt;i++) 
		{
			if((vdec_mode == VDEC_NTSC_960) || (vdec_mode == VDEC_NTSC))
			{
				gpio_i2c_write(vdec_slave_addr[i], 0xFF, 0x00);
				gpio_i2c_write(vdec_slave_addr[i], 0x08, 0xA0);
				gpio_i2c_write(vdec_slave_addr[i], 0x09, 0xA0);
				gpio_i2c_write(vdec_slave_addr[i], 0x0A, 0xA0);
				gpio_i2c_write(vdec_slave_addr[i], 0x0B, 0xA0);
				gpio_i2c_write(vdec_slave_addr[i], 0x88, 0xA0);
				gpio_i2c_write(vdec_slave_addr[i], 0x89, 0xA0);
				gpio_i2c_write(vdec_slave_addr[i], 0x8A, 0xA0);
				gpio_i2c_write(vdec_slave_addr[i], 0x8B, 0xA0);
				gpio_i2c_write(vdec_slave_addr[i], 0x14, 0x80);
				gpio_i2c_write(vdec_slave_addr[i], 0x15, 0x80);
				gpio_i2c_write(vdec_slave_addr[i], 0x16, 0x80);
				gpio_i2c_write(vdec_slave_addr[i], 0x17, 0x80);
				gpio_i2c_write(vdec_slave_addr[i], 0x94, 0x80);
				gpio_i2c_write(vdec_slave_addr[i], 0x95, 0x80);
				gpio_i2c_write(vdec_slave_addr[i], 0x96, 0x80);
				gpio_i2c_write(vdec_slave_addr[i], 0x97, 0x80);
				gpio_i2c_write(vdec_slave_addr[i], 0xFF, 0x03);
				gpio_i2c_write(vdec_slave_addr[i], 0x90, 0x08);
				gpio_i2c_write(vdec_slave_addr[i], 0x91, 0x08);
				gpio_i2c_write(vdec_slave_addr[i], 0x92, 0x08);
				gpio_i2c_write(vdec_slave_addr[i], 0x93, 0x08);
				gpio_i2c_write(vdec_slave_addr[i], 0x94, 0x08);
				gpio_i2c_write(vdec_slave_addr[i], 0x95, 0x08);
				gpio_i2c_write(vdec_slave_addr[i], 0x96, 0x08);
				gpio_i2c_write(vdec_slave_addr[i], 0x97, 0x08);
				gpio_i2c_write(vdec_slave_addr[i], 0x50, 0x00);
			}
			else
			{
				gpio_i2c_write(vdec_slave_addr[i], 0xFF, 0x00);
				gpio_i2c_write(vdec_slave_addr[i], 0x08, 0xDD);
				gpio_i2c_write(vdec_slave_addr[i], 0x09, 0xDD);
				gpio_i2c_write(vdec_slave_addr[i], 0x0A, 0xDD);
				gpio_i2c_write(vdec_slave_addr[i], 0x0B, 0xDD);
				gpio_i2c_write(vdec_slave_addr[i], 0x88, 0xDD);
				gpio_i2c_write(vdec_slave_addr[i], 0x89, 0xDD);
				gpio_i2c_write(vdec_slave_addr[i], 0x8A, 0xDD);
				gpio_i2c_write(vdec_slave_addr[i], 0x8B, 0xDD);
				gpio_i2c_write(vdec_slave_addr[i], 0x14, 0x80);
				gpio_i2c_write(vdec_slave_addr[i], 0x15, 0x80);
				gpio_i2c_write(vdec_slave_addr[i], 0x16, 0x80);
				gpio_i2c_write(vdec_slave_addr[i], 0x17, 0x80);
				gpio_i2c_write(vdec_slave_addr[i], 0x94, 0x80);
				gpio_i2c_write(vdec_slave_addr[i], 0x95, 0x80);
				gpio_i2c_write(vdec_slave_addr[i], 0x96, 0x80);
				gpio_i2c_write(vdec_slave_addr[i], 0x97, 0x80);
				gpio_i2c_write(vdec_slave_addr[i], 0xFF, 0x03);
				gpio_i2c_write(vdec_slave_addr[i], 0x90, 0x01);
				gpio_i2c_write(vdec_slave_addr[i], 0x91, 0x01);
				gpio_i2c_write(vdec_slave_addr[i], 0x92, 0x01);
				gpio_i2c_write(vdec_slave_addr[i], 0x93, 0x01);
				gpio_i2c_write(vdec_slave_addr[i], 0x94, 0x01);
				gpio_i2c_write(vdec_slave_addr[i], 0x95, 0x01);
				gpio_i2c_write(vdec_slave_addr[i], 0x96, 0x01);
				gpio_i2c_write(vdec_slave_addr[i], 0x97, 0x01);
				gpio_i2c_write(vdec_slave_addr[i], 0x50, 0x00);
			}
		}
	}
}	


void vdec_bw_detection_enable(unsigned int ch)
{
	unsigned int i = 0;

	for(i=0;i<vdec_cnt;i++)
	{
		gpio_i2c_write(vdec_slave_addr[i], 0xFF, 0x01);
		gpio_i2c_write(vdec_slave_addr[i], 0xC0, 0x98);
		gpio_i2c_write(vdec_slave_addr[i], 0xC2, 0xba);
		gpio_i2c_write(vdec_slave_addr[i], 0xC4, 0xdc);
		gpio_i2c_write(vdec_slave_addr[i], 0xC6, 0xfe);
		gpio_i2c_write(vdec_slave_addr[i], 0xFF, 0x02);
		gpio_i2c_write(vdec_slave_addr[i], 0x13, 0x0c);
		gpio_i2c_write(vdec_slave_addr[i], 0x14, 0xc0);
		gpio_i2c_write(vdec_slave_addr[i], 0xE0, 0xA0);
		gpio_i2c_write(vdec_slave_addr[i], 0xE2, 0xA0);
		gpio_i2c_write(vdec_slave_addr[i], 0xE4, 0xA0);
		gpio_i2c_write(vdec_slave_addr[i], 0xE6, 0xA0);
		gpio_i2c_write(vdec_slave_addr[i], 0xE8, 0xA0);
		gpio_i2c_write(vdec_slave_addr[i], 0xEA, 0xA0);
		gpio_i2c_write(vdec_slave_addr[i], 0xEC, 0xA0);
		gpio_i2c_write(vdec_slave_addr[i], 0xEE, 0xA0);
		gpio_i2c_write(vdec_slave_addr[i], 0xF0, 0x18);
		gpio_i2c_write(vdec_slave_addr[i], 0xF1, 0x70);
		gpio_i2c_write(vdec_slave_addr[i], 0xF2, 0x20);
		gpio_i2c_write(vdec_slave_addr[i], 0xF4, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0xF5, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0xFF, 0x03);
		gpio_i2c_write(vdec_slave_addr[i], 0xA0, 0xA0);
		gpio_i2c_write(vdec_slave_addr[i], 0xA1, 0xA0);
		gpio_i2c_write(vdec_slave_addr[i], 0xA2, 0xA0);
		gpio_i2c_write(vdec_slave_addr[i], 0xA3, 0xA0);
		gpio_i2c_write(vdec_slave_addr[i], 0xA4, 0xA0);
		gpio_i2c_write(vdec_slave_addr[i], 0xA5, 0xA0);
		gpio_i2c_write(vdec_slave_addr[i], 0xA6, 0xA0);
		gpio_i2c_write(vdec_slave_addr[i], 0xA7, 0xA0);
		gpio_i2c_write(vdec_slave_addr[i], 0xA8, 0xA0);
		gpio_i2c_write(vdec_slave_addr[i], 0xA9, 0xA0);
		gpio_i2c_write(vdec_slave_addr[i], 0xAA, 0xA0);
		gpio_i2c_write(vdec_slave_addr[i], 0xAB, 0xA0);
		gpio_i2c_write(vdec_slave_addr[i], 0xAC, 0xA0);
		gpio_i2c_write(vdec_slave_addr[i], 0xAD, 0xA0);
		gpio_i2c_write(vdec_slave_addr[i], 0xAE, 0xA0);
		gpio_i2c_write(vdec_slave_addr[i], 0xAF, 0xA0);
		gpio_i2c_write(vdec_slave_addr[i], 0xB0, 0x70);
		gpio_i2c_write(vdec_slave_addr[i], 0xB1, 0x70);
		gpio_i2c_write(vdec_slave_addr[i], 0xB2, 0x70);
		gpio_i2c_write(vdec_slave_addr[i], 0xB3, 0x70);
		gpio_i2c_write(vdec_slave_addr[i], 0xB4, 0x70);
		gpio_i2c_write(vdec_slave_addr[i], 0xB5, 0x70);
		gpio_i2c_write(vdec_slave_addr[i], 0xB6, 0x70);
		gpio_i2c_write(vdec_slave_addr[i], 0xB7, 0x70);
		gpio_i2c_write(vdec_slave_addr[i], 0xB8, 0x20);
		gpio_i2c_write(vdec_slave_addr[i], 0xB9, 0x20);
		gpio_i2c_write(vdec_slave_addr[i], 0xBA, 0x20);
		gpio_i2c_write(vdec_slave_addr[i], 0xBB, 0x20);
		gpio_i2c_write(vdec_slave_addr[i], 0xBC, 0x20);
		gpio_i2c_write(vdec_slave_addr[i], 0xBD, 0x20);
		gpio_i2c_write(vdec_slave_addr[i], 0xBE, 0x20);
		gpio_i2c_write(vdec_slave_addr[i], 0xBF, 0x20);	
	}
}


void vdec_bw_detection_disable(unsigned int ch)
{
	unsigned int i = 0;

	for(i=0;i<vdec_cnt;i++)
	{
		gpio_i2c_write(vdec_slave_addr[i], 0xFF, 0x01);
		gpio_i2c_write(vdec_slave_addr[i], 0xC0, 0x10);
		gpio_i2c_write(vdec_slave_addr[i], 0xC2, 0x32);
		gpio_i2c_write(vdec_slave_addr[i], 0xC4, 0x54);
		gpio_i2c_write(vdec_slave_addr[i], 0xC6, 0x76);
		gpio_i2c_write(vdec_slave_addr[i], 0xFF, 0x02);
		gpio_i2c_write(vdec_slave_addr[i], 0x00, 0x03);
		gpio_i2c_write(vdec_slave_addr[i], 0x04, 0x03);
		gpio_i2c_write(vdec_slave_addr[i], 0x08, 0x03);
		gpio_i2c_write(vdec_slave_addr[i], 0x0C, 0x03);
		gpio_i2c_write(vdec_slave_addr[i], 0x13, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0xE0, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0xE2, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0xE4, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0xE6, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0xE8, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0xEA, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0xEC, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0xEE, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0xF0, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0xF1, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0xF2, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0xF4, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0xF5, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0xFF, 0x03);
		gpio_i2c_write(vdec_slave_addr[i], 0xA0, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0xA1, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0xA2, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0xA3, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0xA4, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0xA5, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0xA6, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0xA7, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0xA8, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0xA9, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0xAA, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0xAB, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0xAC, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0xAD, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0xAE, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0xAF, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0xB0, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0xB1, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0xB2, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0xB3, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0xB4, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0xB5, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0xB6, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0xB7, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0xB8, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0xB9, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0xBA, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0xBB, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0xBC, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0xBD, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0xBE, 0x00);
		gpio_i2c_write(vdec_slave_addr[i], 0xBF, 0x00);		
	}
}

unsigned int vdec_bw_black_count_read(unsigned int ch)
{
	//unsigned int i = 0;
	unsigned int value = 0;	

	if(ch<8)
	{
		gpio_i2c_write(vdec_slave_addr[0], 0xFF, 0x02);
		gpio_i2c_write(vdec_slave_addr[0], 0xF3, ch);
		value = gpio_i2c_read(vdec_slave_addr[0], 0xf9);
	}
	else
	{
		gpio_i2c_write(vdec_slave_addr[1], 0xFF, 0x02);
		gpio_i2c_write(vdec_slave_addr[1], 0xF3, ch);
		value = gpio_i2c_read(vdec_slave_addr[1], 0xf9);
	}
	return value;	
}

